function tableList(a,g,f,b){showReflesh();try{var d=$("#user-id").val();var c;if(a=="未公开文章"){c="/article/private?pageNum="+f+"&pageSide="+b+"&userId="+d}else{c="/article/page?pageNum="+f+"&pageSide="+b+"&tag="+a+"&userId="+d}$.ajax({url:c,type:"GET",datatype:"json",success:function(h){try{showDataDiv(h,g)}catch(i){}finally{removeReflesh()}},error:function(){removeReflesh();$.MsgBox.Confirm("提示","系统繁忙，请重试",function(){})}})}catch(e){}}function showDataDiv(n,d){var e=n.data.data;var b=n.data.pageNum;var m=n.data.pageSide;var g="";for(var f=0;f<e.length;f++){var k=e[f];var a=k.id;var l=k.title;var j=new Date(k.ctime).Format("yyyy-MM-dd");var c=k.username;var h=(b-1)*m+parseInt(f)+1;g+='<a href="/article/detail/'+a+'" target="_blank" style="font-weight:bold;">'+l+"</a>";g+='<div style="float:right;font-size:12px;color:#888888;">'+j+"</div>";g+="<hr>"}$("#"+d).html(g)}function toSearch(g){showReflesh();try{var h=1;var a=$(g);var j=a.html();if(null!=g){h=parseInt(j)}var c=$(".active");var b=1;if(undefined!=c){b=parseInt(c.html());c.removeClass("active")}if(null==g){var i='<ul class="pagination"><li><a href="#" onclick="toSearch(this);return false;">«</a></li><li><a class ="active" href="#" onclick="toSearch(this);return false;">'+h+'</a></li><li><a href="#" onclick="toSearch(this);return false;">'+(h+1)+'</a></li><li><a href="#" onclick="toSearch(this);return false;">'+(h+2)+'</a></li><li><a href="#" onclick="toSearch(this);return false;">'+(h+3)+'</a></li><li><a href="#" onclick="toSearch(this);return false;">'+(h+4)+'</a></li><li><a href="#" onclick="toSearch(this);return false;">»</a></li></ul>';$("#foot").html(i)}else{if("«"==j){h=b-1;if(h>5){var i='<ul class="pagination"><li><a href="#" onclick="toSearch(this);return false;">«</a></li><li><a href="#" onclick="toSearch(this);return false;">'+(h-4)+'</a></li><li><a href="#" onclick="toSearch(this);return false;">'+(h-3)+'</a></li><li><a href="#" onclick="toSearch(this);return false;">'+(h-2)+'</a></li><li><a href="#" onclick="toSearch(this);return false;">'+(h-1)+'</a></li><li><a class ="active" href="#" onclick="toSearch(this);return false;">'+h+'</a></li><li><a href="#" onclick="toSearch(this);return false;">»</a></li></ul>';$("#foot").html(i)}else{var i='<ul class="pagination"><li><a href="#" onclick="toSearch(this);return false;">«</a></li><li><a';if(2>h){i+=' class ="active"';h=1}i+=' href="#" onclick="toSearch(this);return false;">'+1+"</a></li><li><a";if(2==h){i+=' class ="active"'}i+=' href="#" onclick="toSearch(this);return false;">'+2+"</a></li><li><a";if(3==h){i+=' class ="active"'}i+=' href="#" onclick="toSearch(this);return false;">'+3+"</a></li><li><a";if(4==h){i+=' class ="active"'}i+=' href="#" onclick="toSearch(this);return false;">'+4+"</a></li><li><a";if(5==h){i+=' class ="active"'}i+=' href="#" onclick="toSearch(this);return false;">'+5+'</a></li><li><a href="#" onclick="toSearch(this);return false;">»</a></li></ul>';$("#foot").html(i)}}else{if("»"==j){h=b+1;var i='<ul class="pagination"><li><a href="#" onclick="toSearch(this);return false;">«</a></li><li><a class ="active" href="#" onclick="toSearch(this);return false;">'+h+'</a></li><li><a href="#" onclick="toSearch(this);return false;">'+(h+1)+'</a></li><li><a href="#" onclick="toSearch(this);return false;">'+(h+2)+'</a></li><li><a href="#" onclick="toSearch(this);return false;">'+(h+3)+'</a></li><li><a href="#" onclick="toSearch(this);return false;">'+(h+4)+'</a></li><li><a href="#" onclick="toSearch(this);return false;">»</a></li></ul>';$("#foot").html(i)}else{a.addClass("active")}}}var f="tableList";var k=$(".activeTag").html();if($.isBlank(k)||"全部"==k){k=""}tableList(k,f,h,20)}catch(d){}finally{removeReflesh()}}function changeTag(a){$(".tagList").each(function(){$(this).removeClass("activeTag")});$(a).addClass("activeTag");toSearch(null)}function allTags(){try{var b=$("#user-id").val();var a="/tag/all?userId="+b;$.ajax({url:a,type:"GET",datatype:"json",success:function(e){if(e.code==10000){var h=e.data;var g='<button class="button tagList" id="id全部" onclick="changeTag(this);"style="height: 30px; font-size: 14px;">全部</button>';for(var f in h){var d=h[f];g+='<button class="button tagList" id="id'+d+'" onclick="changeTag(this);"style="height: 30px; font-size: 14px;">'+d+"</button>"}$("#tagList").html(g)}else{$.MsgBox.Confirm("提示",e.message,function(){})}},error:function(){$.MsgBox.Confirm("提示","系统繁忙，请重试",function(){})}})}catch(c){}finally{}}function bookList(){try{var b=$("#user-id").val();var a="/book/infoList?userId="+b;$.ajax({url:a,type:"GET",datatype:"json",success:function(d){if(d.code==10000){var h=d.data;var g="";for(var f in h){var e=h[f];g+='<a href="/book/'+e.id+'" target="_blank" style="font-size: 20px">《'+e.name+'》</a>&emsp;<span style="font-size: 20px">'+e.creator+'</span><p style="font-size: 16px;background: #F8F8FF">'+e.description+"</p>"}$("#bookList").html(g)}else{$.MsgBox.Confirm("提示",d.message,function(){})}},error:function(){$.MsgBox.Confirm("提示","系统繁忙，请重试",function(){})}})}catch(c){}finally{}}function getUserInfo(){var a=$("#user-id").val();if($.isBlank(a)){return}$.ajax({url:"/user/info/"+a,type:"GET",datatype:"json",async:true,success:function(b){var c=b.code;if(c==10000){var d=b.data;$("#user-name").text(d.userName);document.title=d.userName;if(d.isUserSelf){$("#article-private").show()}}},error:function(){}})}$(function(){var b=window.location.pathname;var a=b.substr(13);$("#user-id").val(a);getUserInfo();allTags();toSearch(null);bookList()});