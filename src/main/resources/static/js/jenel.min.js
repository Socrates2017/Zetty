/*! jEnel v1.0.0 | (c) Chen AnLian */
;var urlRootContext=function(){var b=window.document.location.pathname;var a=b.substring(0,b.substr(1).indexOf("/")+1);return a};function getRootPath(){var c=window.document.location.href;var d=window.document.location.pathname;var e=c.indexOf(d);var b=c.substring(0,e);var a=d.substring(0,d.substr(1).indexOf("/")+1);return(b+a)}(function(){$.MsgBox={Alert:function(g,f){e("alert",g,f);b()},Confirm:function(g,f,h){e("confirm",g,f);b(h)},Cancel:function(g,f,h){e("cancel",g,f);b(h);d()},Cancel2:function(g,f,h){e("cancel",g,f);c(h);d()}};var e=function(g,i,h){var f="";f+='<div id="mb_box"></div><div id="mb_con"><span id="mb_tit">'+i+"</span>";f+='<div id="mb_msg">'+h+'</div><div id="mb_btnbox">';if(g=="alert"){f+='<input id="mb_btn_ok" type="button" value="确定" />'}if(g=="confirm"){f+='<input id="mb_btn_ok" type="button" value="确定" />'}if(g=="cancel"){f+='<input id="mb_btn_ok" type="button" value="确定" />';f+='<input id="mb_btn_no" type="button" value="取消" />'}f+="</div></div>";$("body").append(f);a()};var a=function(){$("#mb_box").css({width:"100%",height:"100%",zIndex:"99999",position:"fixed",filter:"Alpha(opacity=60)",backgroundColor:"black",top:"0",left:"0",opacity:"0.6"});$("#mb_con").css({zIndex:"999999",width:"300px",position:"fixed",backgroundColor:"White",borderRadius:"15px"});$("#mb_tit").css({display:"none",fontSize:"14px",color:"#444",padding:"10px 15px",backgroundColor:"#DDD",borderRadius:"15px 15px 0 0",borderBottom:"3px solid #009BFE",fontWeight:"bold"});$("#mb_msg").css({padding:"20px",lineHeight:"20px",textAlign:"center",borderBottom:"1px dashed #DDD",fontSize:"13px"});$("#mb_ico").css({display:"block",position:"absolute",right:"10px",top:"9px",border:"1px solid Gray",width:"18px",height:"18px",textAlign:"center",lineHeight:"16px",cursor:"pointer",borderRadius:"12px",fontFamily:"微软雅黑"});$("#mb_btnbox").css({margin:"15px 0 10px 0",textAlign:"center"});$("#mb_btn_ok,#mb_btn_no").css({width:"85px",height:"30px",color:"white",border:"none"});$("#mb_btn_ok").css({backgroundColor:"#168bbb"});$("#mb_btn_no").css({backgroundColor:"gray",marginLeft:"20px"});$("#mb_ico").hover(function(){$(this).css({backgroundColor:"Red",color:"White"})},function(){$(this).css({backgroundColor:"#DDD",color:"black"})});var h=document.documentElement.clientWidth;var f=document.documentElement.clientHeight;var g=$("#mb_con").width();var i=$("#mb_con").height();$("#mb_con").css({top:(f-i)/2+"px",left:(h-g)/2+"px"})};var b=function(f){$("#mb_btn_ok").click(function(){$("#mb_box,#mb_con").remove();if(typeof(f)=="function"){f()}})};var c=function(f){$("#mb_btn_ok").click(function(){if(typeof(f)=="function"){f()}$("#mb_box,#mb_con").remove()})};var d=function(){$("#mb_btn_no,#mb_ico").click(function(){$("#mb_box,#mb_con").remove()})}})();function showReflesh(){var b=function(){var c="";c+='<div id="reflesh">';c+='<img id="refleshImg" alt="" src="/static/img/reflesh.gif">';c+="</div>";$("body").append(c);a()};var a=function(){var e=document.documentElement.clientWidth;var c=document.documentElement.clientHeight;$("#reflesh").css({zIndex:"999999",width:e/5+"px",position:"fixed",borderRadius:"50%"});var d=$("#reflesh").width();var f=$("#reflesh").height();$("#refleshImg").css({zIndex:"999999",width:d+"px",position:"fixed"});$("#reflesh").css({top:(c-f)/2+"px",left:(e-d)/2+"px"})};b()}function removeReflesh(){$("#reflesh").remove()}var autoTextarea=function(c,d,h){d=d||0;var a=!!document.getBoxObjectFor||"mozInnerScreenX" in window,b=!!window.opera&&!!window.opera.toString().indexOf("Opera"),e=function(j,k){c.addEventListener?c.addEventListener(j,k,false):c.attachEvent("on"+j,k)},f=c.currentStyle?function(j){var l=c.currentStyle[j];if(j==="height"&&l.search(/px/i)!==1){var k=c.getBoundingClientRect();return k.bottom-k.top-parseFloat(f("paddingTop"))-parseFloat(f("paddingBottom"))+"px"}return l}:function(j){return getComputedStyle(c,null)[j]},i=parseFloat(f("height"));c.style.resize="none";var g=function(){var m,j,l=0,k=c.style;if(c._length===c.value.length){return}c._length=c.value.length;if(!a&&!b){l=parseInt(f("paddingTop"))+parseInt(f("paddingBottom"))}m=document.body.scrollTop||document.documentElement.scrollTop;c.style.height=i+"px";if(c.scrollHeight>i){if(h&&c.scrollHeight>h){j=h-l;k.overflowY="auto"}else{j=c.scrollHeight-l;k.overflowY="hidden"}k.height=j+d+"px";m+=parseInt(k.height)-c.currHeight;document.body.scrollTop=m;document.documentElement.scrollTop=m;c.currHeight=parseInt(k.height)}};e("propertychange",g);e("input",g);e("focus",g);g()};function getFormData(){var a=~navigator.userAgent.indexOf("Android")&&~navigator.vendor.indexOf("Google")&&!~navigator.userAgent.indexOf("Chrome")&&navigator.userAgent.match(/AppleWebKit\/(\d+)/).pop()<=534;return a?new FormDataShim():new FormData()}function upload(d,c,b){var a=getFormData();a.append("file",d);$.ajax({type:"post",url:c,async:true,contentType:false,processData:false,data:a,dataType:"text",success:function(e){b(e)},error:function(e,h,g,f){alert(g)}})}function uploadInPromise(c,a,d,b){return new Promise(function(g,f){var e=getFormData();e.append("file",c);$.ajax({type:"post",url:a,async:true,contentType:false,processData:false,data:e,dataType:"text",success:function(h){d[b]=h;g()},error:function(h,k,j,i){alert(j)}})})}function isEmpty(a){if(null==a||""==a||"null"==a){return true}return false}Date.prototype.Format=function(a){var c={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};if(/(y+)/.test(a)){a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var b in c){if(new RegExp("("+b+")").test(a)){a=a.replace(RegExp.$1,(RegExp.$1.length==1)?(c[b]):(("00"+c[b]).substr((""+c[b]).length)))}}return a};var EventUtil={addHandler:function(a,c,b){if(a.addEventListener){a.addEventListener(c,b,false)}else{if(a.attachEvent){a.attachEvent("on"+c,b)}else{a["on"+c]=b}}},removeHandler:function(a,c,b){if(a.removeEventListener){a.removeEventListener(c,b,false)}else{if(a.detachEvent){a.detachEvent("on"+c,b)}else{a["on"+c]=b}}},listenTouchDirection:function(f,g,b,a,h,i){this.addHandler(f,"touchstart",c);this.addHandler(f,"touchend",c);this.addHandler(f,"touchmove",c);var e;var d;function c(j){switch(j.type){case"touchstart":e=j.touches[0].pageX;d=j.touches[0].pageY;break;case"touchend":var l=j.changedTouches[0].pageX-e;var k=j.changedTouches[0].pageY-d;if(Math.abs(l)>Math.abs(k)){if(l>30){if(a){a()}}else{if(l<-30){if(i){i()}}}}else{if(k>30){if(h){h()}}else{if(k<-30){if(b){b()}}}}break;case"touchmove":if(g){j.preventDefault()}break}}}};String.prototype.endWith=function(a){var b=this.length-a.length;return(b>=0&&this.lastIndexOf(a)==b)};function setCookie(a,c){var b=30;var d=new Date();d.setTime(d.getTime()+b*24*60*60*1000);document.cookie=a+"="+escape(c)+";expires="+d.toGMTString()}function getCookie(b){var a,c=new RegExp("(^| )"+b+"=([^;]*)(;|$)");if(a=document.cookie.match(c)){return unescape(a[2])}else{return null}}function delCookie(a){var c=new Date();c.setTime(c.getTime()-1);var b=getCookie(a);if(b!=null){document.cookie=a+"="+b+";expires="+c.toGMTString()}}function setCookie(a,c,d){var b=getsec(d);var e=new Date();e.setTime(e.getTime()+b*1);document.cookie=a+"="+escape(c)+";expires="+e.toGMTString()}function getsec(c){var b=c.substring(1,c.length)*1;var a=c.substring(0,1);if(a=="s"){return b*1000}else{if(a=="h"){return b*60*60*1000}else{if(a=="d"){return b*24*60*60*1000}}}}(function(a){a.isBlank=function(b){return(!b||a.trim(b)==="")}})(jQuery);function webLog(b){var a=location.pathname;$.ajax({url:"/log/duration?duration="+b+"&uri="+a,type:"GET",datatype:"json",async:true,success:function(c){},error:function(){}})}(function(){var b=Math.ceil(new Date().getTime()/1000);var a=function(){var c=Math.ceil(new Date().getTime()/1000);return c-b};window.onbeforeunload=function(d){var c=a();webLog(c)}})();function initLocationProcedure(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(displayAndWatch,locError,{enableHighAccuracy:true,timeout:60000,maximumAge:60000})}else{}}function locError(a){}function displayAndWatch(a){setUserLocation(a)}function setUserLocation(a){positionLog(a.coords.latitude,a.coords.longitude,a.coords.altitude,a.coords.accuracy,a.coords.altitudeAccuracy,a.coords.heading,a.coords.speed,a.coords.timestamp)}function watchCurrentPosition(){var a=navigator.geolocation.watchPosition(function(b){positionLog(b.coords.latitude,b.coords.longitude,b.coords.altitude,b.coords.accuracy,b.coords.altitudeAccuracy,b.coords.heading,b.coords.speed,b.coords.timestamp)})}function positionLog(i,b,g,e,c,j,f,h){var d=location.pathname;var a={};a.latitude=i;a.longitude=b;a.altitude=g;a.accuracy=e;a.altitudeAccuracy=c;a.heading=j;a.speed=f;a.timestamp=h;a.uri=d;$.ajax({url:"/log/position",type:"POST",contentType:"application/json;charset=utf-8",dataType:"json",data:JSON.stringify(a),success:function(k){},error:function(){}})}$(document).ready(function(){initLocationProcedure();setInterval(initLocationProcedure,60000);webLog(-1)});